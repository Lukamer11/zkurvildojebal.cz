<!doctype html>
<html lang="cs">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
<meta charset="utf-8">
  <title>ÄŒernÃ½ trh - Black Market</title>
  <link rel="stylesheet" href="black.css">
  <script src="supabase_stub.js"></script>
  <script src="items.js"></script>
  <link rel="stylesheet" href="menu.css">
  <script src="menu.js" defer></script>
    <link rel="stylesheet" href="sf_scale.css">
    <script src="sf_scale.js"></script>
  <link rel="stylesheet" href="global.css">
<script src="lang_pack.js"></script>
<link rel="stylesheet" href="mobile.css">
</head>
<body>
<audio id="bgMusic" src="go.mp3" loop preload="auto"></audio>

<div class="layout">

  <!-- LEVÃ PANEL -->
  <aside class="left-panel">
  
</aside>

  <!-- BLACK MARKET AREA -->
  <main class="black-area">

    <!-- NÃZEV + ÄŒASOVAÄŒ EVENTU -->
    <div class="black-title-row">
      <div class="black-title">ğŸ’€ ÄŒERNÃ TRH ğŸ’€</div>
      <div class="black-timer-box" id="eventTimer">
        <div class="timer-label">EVENT DOSTUPNÃ:</div>
        <div class="timer-countdown" id="timerCountdown">--:--:--</div>
      </div>
    </div>

    <!-- LOCKED OVERLAY (kdyÅ¾ nenÃ­ event aktivnÃ­) -->
    <div class="black-locked" id="blackLocked">
      <div class="locked-content">
        <div class="locked-icon">ğŸ”’</div>
        <div class="locked-title">ÄŒERNÃ TRH UZAVÅ˜EN</div>
        <div class="locked-text">
          ÄŒernÃ½ trh je dostupnÃ½ pouze 3 dny v tÃ½dnu!<br>
          DalÅ¡Ã­ otevÅ™enÃ­ za: <span id="lockedCountdown">--:--:--</span>
        </div>
        <div class="locked-days">
          <div class="day-badge" data-day="4">ÄŒT</div>
          <div class="day-badge" data-day="5">PÃ</div>
          <div class="day-badge" data-day="6">SO</div>
        </div>
      </div>
    </div>

    <!-- OBSAH TRHU -->
    <div class="black-container" id="blackContainer">

      <!-- LEVÃ ÄŒÃST - EXKLUZIVNÃ ITEMY -->
      <div class="black-section exclusive">
        <div class="section-header">
          <h2>ğŸ’ EXKLUZIVNÃ ZBOÅ½Ã</h2>
          <span class="premium-badge">+50% ATRIBUTY</span>
        </div>

        <div class="black-grid" id="exclusiveGrid">
          <!-- Loaded by JS -->
        </div>
      </div>

      <!-- PRAVÃ ÄŒÃST - VÃMÄšNY & SPECIÃLY -->
      <div class="black-section trades">
        
        <!-- VÃMÄšNA PENÄšZ ZA CIGARETY -->
        <div class="trade-card">
          <div class="trade-header">
            <h3>ğŸ’° VÃMÄšNA MÄšNY</h3>
          </div>
          <div class="trade-content">
            <div class="trade-offer">
              <div class="trade-give">
                <span class="trade-icon">â‚½</span>
                <span class="trade-amount">120,000</span>
              </div>
              <div class="trade-arrow">â†’</div>
              <div class="trade-get">
                <span class="trade-icon">ğŸš¬</span>
                <span class="trade-amount">120</span>
              </div>
            </div>
            <button class="trade-btn" id="tradeMoney">
              VYMÄšNIT
            </button>
            <div class="trade-info">
              VÃ½hodnÃ½ kurz: 1000â‚½ = 1ğŸš¬
            </div>
          </div>
        </div>

        <!-- VÃMÄšNA CIGARET ZA PENÃZE -->
        <div class="trade-card">
          <div class="trade-header">
            <h3>ğŸš¬ ZPÄšTNÃ VÃMÄšNA</h3>
          </div>
          <div class="trade-content">
            <div class="trade-offer">
              <div class="trade-give">
                <span class="trade-icon">ğŸš¬</span>
                <span class="trade-amount">100</span>
              </div>
              <div class="trade-arrow">â†’</div>
              <div class="trade-get">
                <span class="trade-icon">â‚½</span>
                <span class="trade-amount">80,000</span>
              </div>
            </div>
            <button class="trade-btn" id="tradeCigs">
              VYMÄšNIT
            </button>
            <div class="trade-info">
              HorÅ¡Ã­ kurz: 1ğŸš¬ = 800â‚½
            </div>
          </div>
        </div><!-- STATISTIKY EVENTU -->
        <div class="event-stats">
          <div class="stat-header">ğŸ“Š STATISTIKY EVENTU</div>
          <div class="stat-line">
            <span>Zakoupeno itemÅ¯:</span>
            <b id="statPurchases">0</b>
          </div>
          <div class="stat-line">
            <span>Utraceno groÅ¡e:</span>
            <b id="statMoney">0â‚½</b>
          </div>
          <div class="stat-line">
            <span>ZbÃ½vÃ¡ do konce:</span>
            <b id="statTimeLeft">--:--:--</b>
          </div>
        </div>

      </div>

    </div>

  </main>
</div>

<script src="black.js"></script>
<script>
const music = document.getElementById("bgMusic");
if (music) {
  music.volume = 0.4;

  const savedTime = parseFloat(localStorage.getItem("musicTime") || "0");
  if (!Number.isNaN(savedTime) && savedTime > 0) {
    try { music.currentTime = savedTime; } catch (_) {}
  }

  function safePlay() {
    const p = music.play();
    if (p && typeof p.catch === "function") p.catch(() => {});
  }

  safePlay();

  document.addEventListener(
    "click",
    () => {
      if (music.paused) safePlay();
    },
    { once: true }
  );

  setInterval(() => {
    if (!music.paused) {
      localStorage.setItem("musicTime", String(music.currentTime || 0));
    }
  }, 500);
}
</script>

<script src="mobile_lock.js"></script>
</body>
</html>